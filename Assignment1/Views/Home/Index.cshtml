@model List<Assignment1.Models.DiscussionViewModel> // Ensure the correct model is used

@{
    ViewData["Title"] = "Home"; // Set page title
}

<h2>Discussion Threads</h2>

@foreach (var discussion in Model) // Loop through all discussions
{
    <div class="discussion-item">
        <!-- Fixed URL action: Use "DiscussionId" instead of "Id" -->
        <a href="@Url.Action("GetDiscussion", "Home", new { id = discussion.DiscussionId })">
            <h3>@discussion.Title</h3> <!-- Display discussion title -->
        </a>

        <p>Comments: @discussion.CommentCount</p> <!-- Show comment count -->
        <p>Created At: @discussion.CreatedAt.ToString("yyyy-MM-dd HH:mm")</p> <!-- Format date properly -->
        @if (!string.IsNullOrEmpty(discussion.ImageUrl)) // Use correct property name (ImageUrl)
        {
            <img src="~/images/@discussion.ImageUrl" alt="Discussion Image" class="thumbnail" />
        }
    </div>
    <hr />
}
